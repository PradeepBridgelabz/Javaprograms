package com.bridgelab.ooprograms;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

import com.bridgelab.utility.Utility;

public class PatientModel 
{

	private int id,age;
	private String mobileNumber;
	Utility utility;
	String file="/home/bridgeit/Json/PatientLIst.json";
	JSONArray jsonArray=new JSONArray();
	JSONObject jsonObject=new JSONObject();
		public PatientModel()
		{
			utility=new Utility();
			System.out.println("Enter Patients Details ...");
			System.out.print("Enter Id: ");
			this.id=utility.IntegerInput();
			System.out.println();
			System.out.print("Enter Mobile Number: ");
			this.mobileNumber=utility.StringInput();
			System.out.println();
			System.out.print("Enter age: ");
			this.age=utility.IntegerInput();
			System.out.println();
		}
		public PatientModel(int patientId, String mobileNumber2, int age2) throws IOException {
		this.id=patientId;
		this.mobileNumber=mobileNumber2;
		this.age=age;
		FileReader fr=new FileReader(file);
		BufferedReader br=new BufferedReader(fr);
		if(br.readLine()==null)
		{
			AddingToJsonObject(jsonArray,patientId,mobileNumber2,age2);
		}
		else
		{
			jsonArray=getcurrentJsonObject();
		}
		}
		private JSONArray getcurrentJsonObject() throws FileNotFoundException {
		     JSONParser jsonParser=new JSONParser();
		     JSONObject obj=jsonParser.(new FileReader(file));
		     
			return null;
		}
		private void AddingToJsonObject(JSONArray jsonArray, int patientId, String mobileNumber, int age) {
			JSONObject jsonObject1=new JSONObject();
			jsonObject1.put("PatientId", patientId);
			jsonObject1.put("MobileNumber", mobileNumber);
			jsonObject1.put("age", age);
			jsonArray.add(jsonObject1);
		    jsonObject.put("Patients", jsonArray);
			
		}
		public int getId()
		{
			return id;
		}
		public String getmobileNumber()
		{
			return mobileNumber;
		}
		public int getAge()
		{
			return age;
		}
		public String toString()
		{
			return id+" "+mobileNumber+" "+age+"\n";
		}
}
